<ion-header>
    <page-header></page-header>
    <ion-navbar>
        <ion-title>
            Give
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>
    <button (click)="ChangeState('Start')">1</button>
    <button (click)="ChangeState('MakeDonation')">2</button>
    <button (click)="ChangeState('InputDetail')">3</button>
    <button (click)="ChangeState('Varify')">4</button>
    <div [ngSwitch]="StageString()">


        <div *ngSwitchCase="'Start'">

            <ion-grid>
                <ion-row>
                    <ion-col col-12>
                        <button ion-button block (click)="ChangeState('MakeDonation')"> Make a Donation</button>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        <br>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        <div>
                            My Giving ID(s)
                        </div>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        456
                    </ion-col>
                </ion-row>
            </ion-grid>
        </div>
        <div *ngSwitchCase="'MakeDonation'">
            <ion-grid>
                <ion-row>
                    <ion-col col-12>
                        New Donation
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        <ion-item>
                            <ion-label floating>Amount</ion-label>
                            <ion-input type="number" [(ngModel)]="ThisGiving.Ammount"></ion-input>
                        </ion-item>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        <ion-item>
                            <ion-label floating>Campaign</ion-label>
                            <ion-select [(ngModel)]="ThisGiving.Campaign">
                                <ion-option value="0">No Campaigns</ion-option>
                                <ion-option *ngFor="let item of Campaigns" [value]="item.campaign_id">{{item.campaign_name}}</ion-option>
                            </ion-select>
                        </ion-item>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        Your are making a single donation of Â£{{ThisGiving.Ammount}}
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        Can you Gift Aid?
                    </ion-col>
                    <ion-col col-6>
                        <button ion-button block [class.active]="ThisGiving.IsGiftAid==true" (click)="ThisGiving.IsGiftAid=true" > Yes </button>
                    </ion-col>
                    <ion-col col-6>
                        <button ion-button block [class.active]="ThisGiving.IsGiftAid==false" (click)="ThisGiving.IsGiftAid=false"> No </button>
                    </ion-col>
                    <ion-col>
                        <div>
                            If you are a UK tax payer we are able to claim Gift Aid on your behalf. This means that we receive 25p from the government
                            for every &pound;1 you give.<br>You must make sure that the total
                            Gift Aid that is claimed on your behalf is less than or equal to the total income tax you pay.
                        </div>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        <button ion-button block (click)="ChangeState('InputDetail')"> Donate</button>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </div>
        <div *ngSwitchCase="'InputDetail'">
            <ion-grid>
                <ion-row>
                    <ion-col col-12>
                        <h3>Card Details</h3>
                        <ion-list>
                            <ion-item>
                                <ion-label floating>First Name</ion-label>
                                <ion-input type="text" [(ngModel)]="ThisGiving.FirstName" ></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Last Name</ion-label>
                                <ion-input type="text" [(ngModel)]="ThisGiving.LastName"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Card Number</ion-label>
                                <ion-input type="number" [(ngModel)]="ThisGiving.CardNumber" ></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Start Month</ion-label>
                                <ion-datetime displayFormat="MM/YYYY" pickerFormat="YYYY-MM" [(ngModel)]="ThisGiving.StartMonth" ></ion-datetime>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Expiry Month</ion-label>
                                <ion-datetime displayFormat="MM/YYYY" pickerFormat="YYYY-MM" [(ngModel)]="ThisGiving.ExpireMonth" ></ion-datetime>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Issue Number</ion-label>
                                <ion-input type="number" [(ngModel)]="ThisGiving.IssueNumber"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>CVV Number</ion-label>
                                <ion-input type="number" [(ngModel)]="ThisGiving.CVVNumber"></ion-input>
                            </ion-item>
                            <ion-item style="display: none;"></ion-item>
                        </ion-list>
                    </ion-col>
                </ion-row>
                 <ion-row>
                    <ion-col col-12>
                        <h3>Billng Address</h3>
                        <ion-list>
                            <ion-item>
                                <ion-label floating>Address Line 1</ion-label>
                                <ion-input type="text" [(ngModel)]="ThisGiving.BillingAddress1"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Address Line 2</ion-label>
                                <ion-input type="text" [(ngModel)]="ThisGiving.BillingAddress2"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Address Line 3</ion-label>
                                <ion-input type="text" [(ngModel)]="ThisGiving.BillingAddress3"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>City</ion-label>
                                <ion-input type="text" [(ngModel)]="ThisGiving.City"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>County</ion-label>
                                <ion-input type="text" [(ngModel)]="ThisGiving.County"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Postcode</ion-label>
                                <ion-input type="text" [(ngModel)]="ThisGiving.Postcode"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Email</ion-label>
                                <ion-input type="email" [(ngModel)]="ThisGiving.Email"></ion-input>
                            </ion-item>
                            <ion-item style="display: none;"></ion-item>
                        </ion-list>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        <h3>Gift Aid Details</h3>
                        <ion-list>
                            <ion-item>
                                <ion-label floating>First Name</ion-label>
                                <ion-input type="text"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Last Name</ion-label>
                                <ion-input type="text"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Address (first line only)</ion-label>
                                <ion-input type="text"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Postcode</ion-label>
                                <ion-input type="text"></ion-input>
                            </ion-item>
                            <ion-item>
                                <ion-label floating>Email</ion-label>
                                <ion-input type="email"></ion-input>
                            </ion-item>
                            <ion-item style="display: none;"></ion-item>
                        </ion-list>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        <button ion-button block (click)="PostGiving();" >Complete</button>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-12>
                        <button ion-button block>Cancel</button>
                    </ion-col>
                </ion-row>
            </ion-grid>
            

        </div>
        <div *ngSwitchCase="'Varify'">
            <form method="post" target="3dsecureframe" id="3dsecureform" action="' + data.url + '"></form>
            
            <iframe id="3dsecureframe" src="http://www.google.com" class="secureframe" scrolling="no" name="3dsecureframe" style="border: none; overflow: scroll;width:999px; height:999px; min-height:999px;" frameborder="0"></iframe>
        </div>
    </div>

</ion-content>